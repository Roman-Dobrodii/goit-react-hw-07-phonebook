(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{46:function(t,e,n){},84:function(t,e,n){"use strict";n.r(e);var c,a,o=n(0),r=n(10),s=n.n(r),i=n(9),u=n(4),l=n(35),d=n(8),b=n(3),j=Object(b.b)("contacts/addRequest"),h=Object(b.b)("contacts/addSuccess"),f=Object(b.b)("contacts/addError"),m=Object(b.b)("contacts/removeRequest"),O=Object(b.b)("contacts/removeSuccess"),C=Object(b.b)("contacts/aremoverror"),p=Object(b.b)("contactfetchRequest"),g=Object(b.b)("contacts/fetchSuccess"),v=Object(b.b)("contacts/fetchError"),x={removeContactRequest:m,removeContactSuccess:O,removeContactError:C,addContactError:f,addContactSuccess:h,addContactRequest:j,changeFilter:Object(b.b)("contact/changeFilter"),fetchContactsRequest:p,fetchContactsSuccess:g,fetchContactsError:v},S=Object(b.c)([],(c={},Object(u.a)(c,x.fetchContactsSuccess,(function(t,e){return e.payload})),Object(u.a)(c,x.addContactSuccess,(function(t,e){return[].concat(Object(l.a)(t),[e.payload])})),Object(u.a)(c,x.removeContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),c)),y=Object(b.c)("",Object(u.a)({},x.changeFilter,(function(t,e){return e.payload}))),F=Object(b.c)(!1,(a={},Object(u.a)(a,x.addContactRequest,(function(){return!0})),Object(u.a)(a,x.addContactSuccess,(function(){return!1})),Object(u.a)(a,x.addContactError,(function(){return!1})),Object(u.a)(a,x.removeContactRequest,(function(){return!0})),Object(u.a)(a,x.removeContactSuccess,(function(){return!1})),Object(u.a)(a,x.removeContactError,(function(){return!1})),a)),N=Object(d.c)({items:S,filter:y,loading:F}),E=Object(b.a)({reducer:{contacts:N}}),w=(n(46),n(15)),k=n(16),q=n(18),R=n(17),I=n(34),A=n.n(I),L=n(1),M=function(){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("h1",{className:"mainTitle",children:"Phonebook"})})},B=n(12),D=n(85),P=n(19),T=n.n(P),J={addContact:function(t,e){return function(n){n(x.addContactRequest()),T.a.post("http://localhost:2000/contacts",{name:t,number:e}).then((function(t){console.log(t),n(x.addContactSuccess(t.data))})).catch((function(t){return n(x.addContactError(t))}))}},fetchContacts:function(){return function(t){t(x.fetchContactsRequest()),T.a.get("http://localhost:2000/contacts").then((function(e){var n=e.data;return t(x.fetchContactsSuccess(n))})).catch((function(e){return t(x.fetchContactsError(e))}))}},removeContact:function(t){return function(e){e(x.removeContactRequest()),T.a.delete("http://localhost:2000/contacts/".concat(t)).then((function(){return e(x.removeContactSuccess(t))})).catch((function(t){return e(x.removeContactError(t))}))}}},U=n(14),_=function(t){return t.contacts.filter},z=function(t){return t.contacts.items},G={getLoading:function(t){return t.contacts.loading},getFilter:_,getContacts:z,getContactById:Object(U.a)([function(t,e){return e},z],(function(t,e){return e.find((function(e){return e.id===t}))})),getContactsFiltered:Object(U.a)([z,_],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}))},H=function(t){Object(q.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(w.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).formInitialState={name:"",number:""},t.state=Object(B.a)(Object(B.a)({},t.formInitialState),{},{alertMessageShow:!1}),t.handleChange=function(e){var n=e.target,c=n.name,a=n.value;t.setState(Object(u.a)({},c,a))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,c=n.name,a=n.number;if(t.props.contacts.find((function(t){return t.name===c})))return t.setState({alertMessageShow:!0}),t.setState(Object(B.a)({},t.formInitialState));t.props.onAddContact(c,a),t.setState({name:"",number:""})},t.toggleAlert=function(){t.setState({alertMessageShow:!1})},t}return Object(k.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.number,c=t.alertMessageShow;return Object(L.jsxs)("section",{className:"wrapper",children:[Object(L.jsx)(D.a,{in:c,timeout:250,classNames:"alertFade",unmountOnExit:!0,children:Object(L.jsx)("button",{className:"alertMessage",onClick:this.toggleAlert,children:Object(L.jsx)("p",{children:"Contact already exists"})})}),Object(L.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(L.jsxs)("label",{children:["Name",Object(L.jsx)("input",{className:"input",type:"text",name:"name",value:e,onChange:this.handleChange,placeholder:"Enter name"})]}),Object(L.jsxs)("label",{children:["Number",Object(L.jsx)("input",{className:"input",type:"tel",value:n,onChange:this.handleChange,name:"number",placeholder:"Enter number"})]}),Object(L.jsx)("button",{type:"submit",className:"addContact-button",children:"Add contact"})]})]})}}]),n}(o.Component),K={onAddContact:J.addContact},Q=Object(i.b)((function(t){return{contacts:G.getContacts(t),filter:G.getFilter(t)}}),K)(H);var V=Object(i.b)((function(t){return{value:G.getFilter(t)}}),(function(t){return{onChange:function(e){return t(x.changeFilter(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(L.jsx)("div",{className:"find-input_frame ",children:Object(L.jsx)("label",{children:Object(L.jsx)("input",{className:"input",type:"text",value:e,onChange:n})})})})),W=Object(i.b)((function(t,e){var n=G.getContactById(t,e.id);return Object(B.a)({},n)}),(function(t,e){return{deleteContact:function(n){return t(J.removeContact(e.id))}}}))((function(t){var e=t.id,n=t.name,c=t.number,a=t.deleteContact;return Object(L.jsxs)("li",{className:"contact",children:[Object(L.jsx)("span",{children:n}),Object(L.jsx)("span",{children:c}),Object(L.jsx)("button",{className:"deleteBtn",type:"button",onClick:function(){return a(e)},children:"x"})]})})),X=n(86),Y=Object(i.b)((function(t){var e=G.getContactsFiltered(t);return console.log("items",e),{items:e,contacts:G.getContacts(t)}}))((function(t){var e=t.items,n=t.contacts;return Object(L.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:n.length>0&&0===e.length?Object(L.jsx)("h4",{children:"...Nothing Found"}):Object(L.jsx)(X.a,{component:"ul",className:"contacts-list",children:e.map((function(t){var e=t.id;return Object(L.jsx)(D.a,{classNames:"taskList-fade",timeout:250,unmountOnExit:!0,children:Object(L.jsx)(W,{id:e})},e)}))})})})),Z=function(t){Object(q.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(w.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={showContacts:!1},t}return Object(k.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchContacts()}},{key:"componentDidUpdate",value:function(t,e){console.log("prevProps",t),console.log("nextProps",e)}},{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)(D.a,{in:!0,appear:!0,classNames:"mainTitle-slideIn",timeout:5e3,unmountOnExit:!0,children:Object(L.jsx)(M,{})}),Object(L.jsx)(Q,{}),Object(L.jsx)(D.a,{in:this.props.filteredContacts.length>1||this.props.contacts.length>1,timeout:250,classNames:"findContact",unmountOnExit:!0,children:Object(L.jsx)(V,{})}),Object(L.jsx)(Y,{}),this.props.IsLoadingContacts&&Object(L.jsx)(A.a,{style:{display:"flex ",justifyContent:"center"},type:"ThreeDots",color:"#00BFFF",height:80,width:80})]})}}]),n}(o.Component),$={onFetchContacts:J.fetchContacts},tt=Object(i.b)((function(t){return console.log("state",t),{filteredContacts:G.getContactsFiltered(t),IsLoadingContacts:G.getLoading(t),filter:G.getFilter(t),contacts:t.contacts.items}}),$)(Z);s.a.render(Object(L.jsx)("div",{children:Object(L.jsx)(i.a,{store:E,children:Object(L.jsx)(tt,{})})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.6971e7d1.chunk.js.map